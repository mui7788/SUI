<!DOCTYPE html> 
<html> 
    <head> 
        <META http-equiv="X-UA-Compatible" content="IE=edge"/>
        <META content="text/html; charset=UTF-8" http-equiv=Content-Type>
        <script src="../avalon.js"></script> 
        <script>
            var tvm;
            require(["./input/avalon.input"], function () {
                var vm = avalon.define({
                    $id: "test",
                    $skipArray: ["inuptOpts"],
                    inputOpts: {
                        did: "name",
                        title: "名　　称",
                        value: "",
                        notice: "请输入名称",
                        isReadonly: false,
                        isDisabled: false,
                        isRequired: true,
                        isShowNoticeImage: true
                    },
                    inputOpts2: {
                        did: "phone",
                        title: "联系电话",
                        value: "",
                        notice: "请输入联系电话",
                        isReadonly: false,
                        isDisabled: false,
                        isRequired: true,
                        regexType: "int",
                        regexErrorNotice: "联系电话输错了"
                    },
                    inputOpts3: {
                        did: "address",
                        title: "联系地址",
                        value: "",
                        notice: "请输入联系地址",
                        isReadonly: false,
                        isDisabled: false,
                        isRequired: true,
                        widthType: "large"
                    },
                    inputOpts4: {
                        title: "月    份",
                        value: "",
                        regexContent: "^\\d{1,2}$",
                        widthType: "small",
                        regexErrorNotice: "error"
                    },
                    inputOpts5: {
                        title: "登录密码",
                        value: "",
                        widthType: "small",
                        regexErrorNotice: "密码格式不正确",
                        type: "password",
                        isRequired: true
                    },
                    inputOpts6: {
                        title: "详细信息",
                        value: "",
                        widthType: "big",
                        type: "textarea",
                        isRequired: true
                    },
                    inputOpts7: {
                        did:"must",
                        title: "允许不填",
                        value: "111",
                        regexType:"alpha"
                    },
                    set: function ()
                    {
                        //avalon.vmodels.idcard.isDisabled=true;
                        //alert(avalon.vmodels.user.value)
                        //avalon.log(tvm.value)
                        //tvm.isDisabled = true;
                    },
                    getVM: function (vm)
                    {
                        tvm = vm
                    },
                    changeValue:function(n,o)
                    {
                        avalon.log(n+"_"+o)
                    },
                    check: function ()
                    {
                        var _focus = false;
                        if (!avalon.vmodels.user.check())
                        {
                            if (!_focus)
                            {
                                avalon.vmodels.user.setFocus()
                                _focus = true;
                            }
                        }
                        if (!avalon.vmodels.phone.check())
                        {
                            if (!_focus)
                            {
                                avalon.vmodels.phone.setFocus()
                                _focus = true;
                            }
                        }
                        if (!avalon.vmodels.address.check())
                        {
                            if (!_focus)
                            {
                                avalon.vmodels.address.setFocus()
                                _focus = true;
                            }
                        }
                        if (!avalon.vmodels.idcard.check())
                        {
                            if (!_focus)
                            {
                                avalon.vmodels.idcard.setFocus()
                                _focus = true;
                            }
                        }
                        if (!avalon.vmodels.must.check())
                        {
                            if (!_focus)
                            {
                                avalon.vmodels.must.setFocus()
                                _focus = true;
                            }
                        }
                    }
                })
                avalon.scan()

            })
        </script>
    </head>
    <body ms-controller="test">
        <div><ms:input config="inputOpts" $id="user" on-change="changeValue"></ms:input></div>
        <div><ms:input config="inputOpts2" $id="phone" on-change="set" on-init="getVM"></ms:input></div>
        <div><ms:input config="inputOpts3" $id="address"></ms:input></div>
        <div><ms:input title="http" width-Type="big" regex-Type="url" ></ms:input></div>
        <div><ms:input title="email" width-Type="normal" regex-Type="email"></ms:input></div>
        <div><ms:input config="inputOpts4"></ms:input></div>

        <div><ms:input  config="inputOpts5" regex-Type="alpha_dash"></ms:input></div>
        <div><ms:input  config="inputOpts6"></ms:input></div>
        <div><ms:input  regex-Type="idcard"  title="身份证号" $id="idcard" did="idcard"></ms:input></div>
        <div><ms:input  regex-Type="date"  title="出生日期" ></ms:input></div>
        <div><ms:input  config="inputOpts7" $id="must"></ms:input></div>
        <input type="button" ms-click="check" value="check">
        <input type="button" ms-click="kan" value="test">
    </body>



